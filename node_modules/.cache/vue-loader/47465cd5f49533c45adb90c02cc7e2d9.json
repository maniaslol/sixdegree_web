{"remainingRequest":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chih-linliu/Desktop/sixdegrees_web-master/src/components/searchList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/src/components/searchList.vue","mtime":1541528682000},{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/cache-loader/dist/cjs.js","mtime":1541592870520},{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport $ from 'jquery';\nimport sidebar from \"./sidebar.vue\"\nexport default {\n    name: 'searchList',\n    components: {\n        sidebar\n    },\n    props: {\n        msg: String\n    },\n    data() {\n        return {\n            domain: 'http://api.dev.sixdegreeworld.com',\n            Token: '',\n            Token_type: '',\n            data: [{\n                media: []\n            }],\n            popularData: [],\n            searchWorld: \"\",\n            isLoading: false,\n        }\n    },\n    computed: {\n        filterData: function () {\n            let nowData = this.data.map(function (el) {\n                if (el.media == [] || el.media == null) {\n                    el.media = {\n                        small: \"https://newweb.dev.sixdegreeworld.com/sixdegree.svg\"\n                    }\n                    return el;\n                } else {\n                    return el;\n                }\n            })\n            return nowData;\n        },\n        filterPopularData: function () {\n            let nowData = this.popularData.map(function (el) {\n                return el.name\n            })\n            return nowData;\n        }\n    },\n    methods: {\n        init() {\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n\n                //get token\n\n                type: \"Post\",\n                url: this.domain + '/oauth/token/',\n                data: {\n                    grant_type: \"client_credentials\",\n                    client_id: \"1\",\n                    client_secret: \"zSVE2Bd64icnRyo7VSo997rriPLDPMbY9LmmIurv\"\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        vm.Token = data.data.access_token;\n                        vm.Token_type = data.data.token_type;\n                        //有資料的動作\n                        vm.getSearchData();\n                        vm.getPopular();\n                        //取得文章資料\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        getSearchData() {\n            const id = this.$route.params.id\n            console.log(id);\n            this.searchWorld = id;\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n                type: \"Get\",\n                url: vm.domain + `/search/?name=${this.searchWorld}`,\n                headers: {\n                    \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        //有資料的動作\n                        vm.data = data.data;\n                        vm.isLoading = false;\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        getPopular() {\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n                type: \"Get\",\n                url: vm.domain + `/search/popular`,\n                headers: {\n                    \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        //有資料的動作\n                        vm.popularData = data.data;\n                        vm.isLoading = false;\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        searchSubmit() {\n            this.$router.push(`/search/${this.searchWorld}`)\n            this.init();\n        }\n    },\n    created() {\n        this.init();\n        this.searchWorld = this.$route.params.id;\n    },\n    mounted() {\n\n    },\n}\n",{"version":3,"sources":["searchList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"searchList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <loading :active.sync=\"isLoading\"></loading>\n        <nav class=\"container searchNavbar\">\n            <div class=\"row\">\n                <div class=\"col-2 col-lg-1\">\n                    <router-link to='/' class=\"logo\">\n                        <img src=\"../assets/Images/6degreesWeb/navBar/logo-light-blue.svg\" alt=\"icon\">\n                    </router-link>\n                </div>\n                <div class=\"col-10 col-lg-6\">\n                    <vue-bootstrap-typeahead :placeholder=\"searchWorld\" v-model=\"searchWorld\" :data=\"filterPopularData\"\n                        class=\"searchpage-input\" @keyup.enter.native=\"searchSubmit\" />\n                    <a :href=\"'/#/search/'+ searchWorld\" class='search-bottom' @click='init'>\n                        <img src=\"../assets/Images/6degreesWeb/navBar/search.svg\" alt=\"\">\n                    </a>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-lg-6 searchNavbar-bottom\">\n                    <ul class=\"d-flex\">\n                        <li><a href=\"#\" class=\"active\">全部</a> </li>\n                        <li><a href=\"#\">文章</a> </li>\n                        <li><a href=\"#\">影片</a> </li>\n                        <li><a href=\"#\">圖片</a> </li>\n                    </ul>\n                </div>\n            </div>\n        </nav>\n\n        <div class=\"container searchList\">\n            <div class=\"row\">\n                <div class=\"col-lg-8 col-md-12\">\n                    <div class=\"row\">\n                        <div class=\"col-md-12\">\n                            <h2>熱門搜尋</h2>\n                            <div class=\"searchList-bottom d-flex\">\n                                <a :href=\"'/#/search/'+ item.name\" v-for=\"(item,key) in popularData\" v-if=\"key<6\"\n                                    @click='init'>{{item.name}}</a>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row mt-4\">\n                        <div class=\"col-md-12\">\n                            <div class=\"news container\" v-for=\"item in filterData\" :key=\"item.id\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-4 \">\n                                        <router-link :to=\"'/inspect/'+item.id\" class=\"news-img\" :style=\"{ backgroundImage: 'url(' + item.media.small + ')' }\"></router-link>\n                                        <!-- <a :href=\"item.news_url\" class=\"news-img\" :style=\"{ backgroundImage: 'url(' + item.media.small + ')' }\">\n                                                    </a> -->\n                                    </div>\n                                    <div class=\"col-md-8\">\n                                        <h3>{{item.title}}</h3>\n                                        <p class=\"d-block d-sm-none\">{{item.description}}</p>\n                                        <div class=\"news-tag\">\n                                            <span>{{item.datasource_name}}</span>\n                                            <span><img src=\"../assets/Images/6degreesWeb/news/time.svg\" alt=\"\">{{\n                                                item.report_time | moment(\"h:mm\") }}\n                                            </span>\n                                            <span><img src=\"../assets/Images/6degreesWeb/news/views.svg\" alt=\"\">1125</span>\n                                        </div>\n                                        <div class=\"news-tag_gray\" v-if='item.tag'>\n                                            <span>\n                                                <img src=\"../assets/Images/6degreesWeb/news/tag-icon.svg\" alt=\"\">\n                                                <span v-for=\"tag in item.tag\" :key=\"tag.id\">\n                                                    {{ tag.name }}\n                                                </span>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- 測欄---------------------------------------------------- -->\n\n                <div class=\"col-lg-4\">\n                    <div class=\"container\">\n\n                        <footer class=\"row footer mt-3\">\n                            <h3 class=\"col-12\">更多關於六度</h3>\n                            <div class=\"col-6 mt-3\"><a href=\"#\"><img src=\"../assets/Images/6degreesWeb/phone/andro.svg\"\n                                        alt=\"\"></a></div>\n                            <div class=\"col-6 mt-3\"><a href=\"#\"><img src=\"../assets/Images/6degreesWeb/phone/ios.svg\"\n                                        alt=\"\"></a></div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">關於我們</a> </div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">連繫我們</a></div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">加入我們</a></div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">服務條款</a></div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">版權聲明</a></div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">友情連結</a></div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">RSS訂閱</a></div>\n                            <div class=\"col-4 mt-4\"><a href=\"#\">隱私策略</a></div>\n                        </footer>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script>\n    import $ from 'jquery';\n    import sidebar from \"./sidebar.vue\"\n    export default {\n        name: 'searchList',\n        components: {\n            sidebar\n        },\n        props: {\n            msg: String\n        },\n        data() {\n            return {\n                domain: 'http://api.dev.sixdegreeworld.com',\n                Token: '',\n                Token_type: '',\n                data: [{\n                    media: []\n                }],\n                popularData: [],\n                searchWorld: \"\",\n                isLoading: false,\n            }\n        },\n        computed: {\n            filterData: function () {\n                let nowData = this.data.map(function (el) {\n                    if (el.media == [] || el.media == null) {\n                        el.media = {\n                            small: \"https://newweb.dev.sixdegreeworld.com/sixdegree.svg\"\n                        }\n                        return el;\n                    } else {\n                        return el;\n                    }\n                })\n                return nowData;\n            },\n            filterPopularData: function () {\n                let nowData = this.popularData.map(function (el) {\n                    return el.name\n                })\n                return nowData;\n            }\n        },\n        methods: {\n            init() {\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n\n                    //get token\n\n                    type: \"Post\",\n                    url: this.domain + '/oauth/token/',\n                    data: {\n                        grant_type: \"client_credentials\",\n                        client_id: \"1\",\n                        client_secret: \"zSVE2Bd64icnRyo7VSo997rriPLDPMbY9LmmIurv\"\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            vm.Token = data.data.access_token;\n                            vm.Token_type = data.data.token_type;\n                            //有資料的動作\n                            vm.getSearchData();\n                            vm.getPopular();\n                            //取得文章資料\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            getSearchData() {\n                const id = this.$route.params.id\n                console.log(id);\n                this.searchWorld = id;\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n                    type: \"Get\",\n                    url: vm.domain + `/search/?name=${this.searchWorld}`,\n                    headers: {\n                        \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            //有資料的動作\n                            vm.data = data.data;\n                            vm.isLoading = false;\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            getPopular() {\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n                    type: \"Get\",\n                    url: vm.domain + `/search/popular`,\n                    headers: {\n                        \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            //有資料的動作\n                            vm.popularData = data.data;\n                            vm.isLoading = false;\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            searchSubmit() {\n                this.$router.push(`/search/${this.searchWorld}`)\n                this.init();\n            }\n        },\n        created() {\n            this.init();\n            this.searchWorld = this.$route.params.id;\n        },\n        mounted() {\n\n        },\n    }\n</script>\n\n<style lang=\"scss\">\n\n</style>"]}]}