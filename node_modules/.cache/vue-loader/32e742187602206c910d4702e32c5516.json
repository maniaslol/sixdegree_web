{"remainingRequest":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chih-linliu/Desktop/sixdegrees_web-master/src/components/newsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/src/components/newsList.vue","mtime":1541594485723},{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/cache-loader/dist/cjs.js","mtime":1541592870520},{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport sidebar from \"./sidebar.vue\"\nimport $ from \"jquery\";\nexport default {\n    name: 'newsList',\n    components: {\n        sidebar\n    },\n    props: {\n        msg: String\n    },\n    data() {\n        return {\n            domain: 'http://api.dev.sixdegreeworld.com',\n            Token: '',\n            Token_type: '',\n            data: [{\n                media: []\n            }],\n            recommendData: [],\n            navbarData: [],\n            popularData: [],\n            searchWorld: \"\",\n            mainNews: 0,\n            scrollTop: '',\n            windowsWidth: '',\n            offsetHeight: '',\n            limitScrollTop: 1600,\n            dataLimit: 8,\n            isLoading: false,\n        }\n    },\n    computed: {\n        filterData: function () {\n            let nowData = this.data.map(function (el) {\n                if (el.media == [] || el.media == null) {\n                    el.media = {\n                        small: \"https://newweb.dev.sixdegreeworld.com/sixdegree.svg\"\n                    }\n                    return el;\n                } else {\n                    return el;\n                }\n            })\n            return nowData;\n        },\n        filterPopularData: function () {\n            let nowData = this.popularData.map(function (el) {\n                return el.name\n            })\n            return nowData;\n        }\n    },\n    watch: {\n        scrollTop: function () {\n            const vm = this;\n            if ((vm.offsetHeight - vm.scrollTop) < 175) {\n                if (vm.windowsWidth < 996) {\n                    return\n                }\n                vm.offsetHeight += 1480,\n                    vm.getData(1, this.dataLimit)\n            } else {\n                return\n            }\n        }\n    },\n    methods: {\n        searchSubmit() {\n            this.$router.push(`/search/${this.searchWorld}`)\n        },\n        onScroll() {\n            // 滾動判断条件\n            this.scrollTop = (document.documentElement.scrollTop || document.body.scrollTop ||\n                window.pageYOffset) + $(window).height();\n\n            this.windowsWidth = $(window).width()\n\n            // this.offsetHeight = document.body.scrollHeight;\n        },\n        init() {\n            const vm = this;\n            vm.limitScrollTop = 1600;\n            vm.offsetHeight = document.body.scrollHeight;\n            vm.dataLimit = 8;\n            vm.isLoading = true;\n            $.ajax({\n\n                //get token\n\n                type: \"Post\",\n                url: this.domain + '/oauth/token/',\n                data: {\n                    grant_type: \"client_credentials\",\n                    client_id: \"1\",\n                    client_secret: \"zSVE2Bd64icnRyo7VSo997rriPLDPMbY9LmmIurv\"\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        vm.Token = data.data.access_token;\n                        vm.Token_type = data.data.token_type;\n                        //有資料的動作\n                        vm.getData();\n                        vm.getNavbar();\n                        vm.getPopular();\n                        //取得文章資料\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        getData(page = 1, limit = 10) {\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n                type: \"Get\",\n                url: this.domain + `/article?page=${page}&limit=${limit}`,\n                headers: {\n                    \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        //有資料的動作\n                        vm.data = data.data;\n                        vm.dataLimit += 10;\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        getRecommendData(page = 1, limit = 10) {\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n                type: \"Get\",\n                url: this.domain + `/article/recommend`,\n                headers: {\n                    \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        //有資料的動作\n                        vm.data = data.data;\n                        vm.offsetHeight = document.body.scrollHeight;\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        getNavbar() {\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n                type: \"Get\",\n                url: this.domain + `/navbar/`,\n                headers: {\n                    \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        //有資料的動作\n                        vm.navbarData = data.data;\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        getPopular() {\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n                type: \"Get\",\n                url: vm.domain + `/search/popular`,\n                headers: {\n                    \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        //有資料的動作\n                        vm.popularData = data.data;\n                        vm.isLoading = false;\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n    },\n    mounted: function () {\n        this.$nextTick(function () {\n            window.addEventListener('scroll', this.onScroll)\n        })\n\n        this.offsetHeight = document.body.scrollHeight;\n    },\n    created() {\n        this.init();\n    },\n}\n",{"version":3,"sources":["newsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"newsList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <loading :active.sync=\"isLoading\"></loading>\n\n        <!-- 網頁板herder----------------------------------------------------- -->\n\n        <nav class=\"container-fluid d-none d-lg-flex\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-2 col-lg-1\">\n                        <router-link to='/' class=\"logo\">\n                            <img src=\"../assets/Images/6degreesWeb/navBar/logo-light-blue.svg\" alt=\"icon\">\n                        </router-link>\n                    </div>\n\n                    <ul class=\"nav-list d-sm-block col-lg-5 col-md-8\">\n                        <li class=\"home\">\n                            <router-link to='/recommend'>首頁推薦</router-link>\n                        </li>\n                        <li v-for=\"(item, index) in navbarData \" :key=\"index\" v-if=\"index>0 & index < 7\">\n                            <router-link :to='\"/tagPage/\"+item.id' class=\"nav-item\">{{item.name}}</router-link>\n                        </li>\n                        <!-- <li class=\"dropdown show\">\n                            <a class=\"dropdown-toggle nav-item\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\"\n                                data-toggle=\"dropdown\">\n                                更多 <i class=\"fas fa-sort-down\"></i>\n                            </a>\n                            <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\n                                <router-link class=\"dropdown-item\" :to='\"/tagPage/\"+item.id' v-for=\"(item, index) in navbarData\"\n                                    :key=\"index\" v-if=\"index>6\">{{item.name}}</router-link>\n                            </div>\n                        </li> -->\n                    </ul>\n                    <div class=\"user-bar col-lg-6 col-md-6 d-flex\">\n                        <div class=\"search-input\">\n                            <router-link :to=\"'/search/'+searchWorld\">\n                                <img src=\"../assets/Images/6degreesWeb/navBar/search.svg\" alt=\"\">\n                            </router-link>\n                            <!-- <vue-bootstrap-typeahead v-model=\"query\" :data=\"['Canada', 'USA', 'Mexico']\" class=\"new-input\" /> -->\n                            <input name=\"\" id=\"tags\" class=\"\" type=\"input\" value=\"\" placeholder=\"請輸入關鍵字\" v-model=\"searchWorld\"\n                                @keyup.enter=\"searchSubmit\">\n                        </div>\n\n                        <div class=\"user-donate\"><a href=\"#\">點數 <img src=\"../assets/Images/6degreesWeb/icon/grayMoney.svg\"\n                                    alt=\"\">\n                            </a></div>\n                        <!-- <div class=\"dropdown show\">\n                            <a class=\"dropdown-toggle user-language\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\"\n                                data-toggle=\"dropdown\">\n                                繁體中文<i class=\"fas fa-sort-down\"></i>\n                            </a>\n                            <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\n                                <a class=\"dropdown-item\" href=\"#\">繁體中文</a>\n                                <a class=\"dropdown-item\" href=\"#\">簡體中文</a>\n                            </div>\n                        </div> -->\n                        <router-link class=\"user-photo\" to=\"/profile\">\n                            <div class=\"user-img\"><img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS0_2nqm0H20gpO-Pf9BsBwuAYt3McWcb-6rFs37i244h71Lyrnkg\"\n                                    alt=\"\">\n                            </div>\n                            <i class=\"fas fa-angle-down\"></i>\n                        </router-link>\n                    </div>\n                </div>\n            </div>\n\n        </nav>\n\n\n        <!-- 平板header------------------------------------------------------------------ -->\n\n        <nav class=\"container-fluid pad-header d-lg-none d-sm-block d-none\">\n            <div class=\"row\">\n                <div class=\"col-1\">\n                    <router-link to='/' class=\"logo\">\n                        <img src=\"../assets/Images/6degreesWeb/navBar/logo-light-blue.svg\" alt=\"icon\">\n                    </router-link>\n                </div>\n                <div class=\"col-11 d-flex\">\n                    <div class=\"pad-search-input\">\n                        <input name=\"\" id=\"\" class=\"\" type=\"input\" value=\"\" placeholder=\"請輸入關鍵字\" v-model=\"searchWorld\"\n                            @keyup.enter=\"searchSubmit\">\n                        <router-link :to=\"'/search/'+searchWorld\">\n                            <img src=\"../assets/Images/6degreesWeb/navBar/search.svg\" alt=\"\">\n                        </router-link>\n                    </div>\n                    <div class=\"user-donate\"><a href=\"#\">點數\n                            <img src=\"../assets/Images/6degreesWeb/icon/grayMoney.svg\" alt=\"\"> </a>\n                    </div>\n                    <!-- <div class=\"dropdown show\">\n                        <a class=\"dropdown-toggle user-language\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\"\n                            data-toggle=\"dropdown\">\n                            繁體中文<i class=\"fas fa-sort-down\"></i>\n                        </a>\n                        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\n                            <a class=\"dropdown-item\" href=\"#\">繁體中文</a>\n                            <a class=\"dropdown-item\" href=\"#\">簡體中文</a>\n                        </div>\n                    </div> -->\n                    <router-link class=\"user-photo\" to=\"/profile\">\n                        <div class=\"user-img\"><img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS0_2nqm0H20gpO-Pf9BsBwuAYt3McWcb-6rFs37i244h71Lyrnkg\"\n                                alt=\"\">\n                        </div>\n                        <i class=\"fas fa-angle-down\"></i>\n                    </router-link>\n                </div>\n            </div>\n            <div class=\"row\" style=\"margin-top:-26px;\">\n                <ul class=\"nav-list d-sm-block col-11 col-md-8\">\n                    <li class=\"home active\">\n                        <router-link to='/recommend'>首頁推薦</router-link>\n                    </li>\n                    <li v-for=\"(item, index) in navbarData \" :key=\"index\" v-if=\"index>0 & index < 7\">\n                        <router-link :to='\"/tagPage/\"+item.id' class=\"nav-item\">{{item.name}}</router-link>\n                    </li>\n                    <!-- <li class=\"dropdown show\">\n                        <a class=\"dropdown-toggle nav-item\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\" data-toggle=\"dropdown\">\n                            更多 <i class=\"fas fa-sort-down\"></i>\n                        </a>\n                        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\n                            <router-link class=\"dropdown-item\" :to='\"/tagPage/\"+item.id' v-for=\"(item, index) in navbarData\"\n                                :key=\"index\" v-if=\"index>6\">{{item.name}}</router-link>\n                        </div>\n                    </li> -->\n                </ul>\n            </div>\n        </nav>\n\n        <!-- 手機板header------------------------------------------------------------------ -->\n\n        <nav class=\"container-fluid pad-header d-block d-sm-none\">\n            <div class=\"row\">\n                <div class=\"col-1\">\n                    <router-link to='/' class=\"logo\">\n                        <img src=\"../assets/Images/6degreesWeb/navBar/logo-light-blue.svg\" alt=\"icon\">\n                    </router-link>\n                </div>\n                <div class=\"col-11 d-flex\">\n                    <div class=\"pad-search-input\">\n                        <input name=\"\" id=\"\" class=\"\" type=\"input\" value=\"\" placeholder=\"請輸入關鍵字\" @keyup.enter=\"searchSubmit\">\n                        <a href=\"#\">\n                            <img src=\"../assets/Images/6degreesWeb/navBar/search.svg\" alt=\"\">\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\" style=\"margin-top:-16px;\">\n                <div class=\"col-3\">\n                    <div class=\"user-donate\"><a href=\"#\">點數\n                            <img src=\"../assets/Images/6degreesWeb/icon/grayMoney.svg\" alt=\"\"> </a>\n                    </div>\n                </div>\n                <div class=\"col-6\">\n                    <!-- <div class=\"dropdown show\">\n                        <a class=\"dropdown-toggle user-language\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\"\n                            data-toggle=\"dropdown\">\n                            繁體中文<i class=\"fas fa-sort-down\"></i>\n                        </a>\n                        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\n                            <a class=\"dropdown-item\" href=\"#\">繁體中文</a>\n                            <a class=\"dropdown-item\" href=\"#\">簡體中文</a>\n                        </div>\n                    </div> -->\n                </div>\n                <div class=\"col-3 ml-auto\">\n                    <router-link class=\"user-photo\" to=\"/profile\">\n                        <div class=\"user-img\"><img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS0_2nqm0H20gpO-Pf9BsBwuAYt3McWcb-6rFs37i244h71Lyrnkg\"\n                                alt=\"\">\n                        </div>\n                        <i class=\"fas fa-angle-down\"></i>\n                    </router-link>\n                </div>\n            </div>\n            <div class=\"row\" style=\"border-bottom:3px solid #4A90E2\">\n                <div class=\"col-3\">\n                    <div class=\"dropdown show burger-bottom\">\n                        <a class=\"dropdown-toggle\" href=\"#\" role=\"button\" id=\"dropdownMenuLink\" data-toggle=\"dropdown\">\n                            <i class=\"fas fa-bars\"></i>\n                        </a>\n                        <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\n                            <router-link :to='\"/tagPage/\"+item.id' class=\"nav-item dropdown-item\" v-for=\"(item, index) in navbarData\"\n                                :key=\"index\" v-if=\"index>0\">{{item.name}}</router-link>\n                        </div>\n                    </div>\n\n                </div>\n                <div class=\"col-6\">\n                    <h2>\n                        <router-link to='/recommend'>首頁推薦</router-link>\n                    </h2>\n                </div>\n            </div>\n        </nav>\n\n        <!-- hotgat---------------------------------------------------------------------------- -->\n\n        <div class=\"hottag container-fluid d-flex\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-12\">\n                        <a href=\"#\" v-for='(item,key) in filterPopularData' :key=\"key\" v-if=\"key<8\">{{item}}</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-lg-8 col-md-12\">\n\n                    <!-- 桌機板main-news----------------------------------------------------------- -->\n\n                    <div class=\"main-news d-none d-md-flex\">\n                        <div id=\"carouselExampleIndicators\" class=\"carousel slide main-news-group\" data-ride=\"carousel\">\n                            <ol class=\"carousel-indicators\">\n                                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" class=\"active\" @click='mainNews=0'></li>\n                                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\" @click='mainNews=1'></li>\n                                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\" @click='mainNews=2'></li>\n                                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"3\" @click='mainNews=3'></li>\n                                <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"4\" @click='mainNews=4'></li>\n                            </ol>\n                            <div class=\"carousel-inner main-news-content\">\n                                <div class=\"carousel-inner\">\n                                    <div class=\"carousel-item\" v-for='(item,key) in filterData' :key=\"key\" v-if=\"key<'5'\" :class=\"{active:key==0}\">\n                                        <router-link :to=\"'/inspect/'+item.id\" class=\"main-news-img d-block w-100\"\n                                            :style=\"{ backgroundImage: 'url(' + item.media.small + ')' }\">\n                                        </router-link>\n                                        <div class=\"carousel-caption d-none d-md-block\">\n                                            <div class=\"main-inspect-news\">\n                                                <transition name=\"fade\" mode=\"out-in\" appear>\n                                                    <h1>{{item.title}}</h1>\n                                                </transition>\n                                                <p>文章內容</p>\n                                                <div class=\"main-news-tag\">\n                                                    <transition name=\"fade\" mode=\"out-in\" appear>\n                                                        <span class=\"d-block d-md-inline\"><a href=\"#\">{{item.datasource_name}}</a></span>\n                                                    </transition>\n                                                    <transition name=\"fade\" mode=\"out-in\" appear>\n                                                        <span><img src=\"../assets/Images/6degreesWeb/news/time.svg\" alt=\"\">\n                                                            {{ item.report_time | moment(\"h:mm\") }}\n                                                        </span>\n                                                    </transition>\n                                                    <span><img src=\"../assets/Images/6degreesWeb/news/views.svg\" alt=\"\">{{item.pageview}}\n                                                    </span>\n\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <!-- 平板main-news--------------------------------------------------------------- -->\n\n                    <div id=\"carouselExampleIndicators-sm\" class=\"main-news-sm carousel slide d-block d-md-none\"\n                        data-ride=\"carousel\">\n                        <ol class=\"carousel-indicators\">\n                            <li data-target=\"#carouselExampleIndicators-sm\" data-slide-to=\"0\" class=\"active\"></li>\n                            <li data-target=\"#carouselExampleIndicators-sm\" data-slide-to=\"1\"></li>\n                            <li data-target=\"#carouselExampleIndicators-sm\" data-slide-to=\"2\"></li>\n                            <li data-target=\"#carouselExampleIndicators-sm\" data-slide-to=\"3\"></li>\n                            <li data-target=\"#carouselExampleIndicators-sm\" data-slide-to=\"4\"></li>\n                        </ol>\n                        <div class=\"carousel-inner\">\n                            <div class=\"carousel-item\" v-for='(item,key) in filterData' :key=\"key\" v-if=\"key<'5'\" :class=\"{active:key==0}\">\n                                <div class=\"main-news_mobile\">\n                                    <div class=\"main-news-hero_mobile\">\n                                        <a :href=\"item.news_url\" class=\"main-news-img d-block w-100\" :style=\"{ backgroundImage: 'url(' + item.media.small + ')' }\">\n                                        </a>\n                                    </div>\n                                    <div class=\"main-inspect-news_mobile\">\n                                        <h1>{{item.title}}</h1>\n                                        <p>文章內容</p>\n                                        <div class=\"main-news-tag_mobile\">\n                                            <span class=\"d-block d-md-inline\"><a href=\"#\">{{item.datasource_name}}</a></span>\n                                            <span><img src=\"../assets/Images/6degreesWeb/news/time.svg\" alt=\"\"> 08:39\n                                            </span>\n                                            <span><img src=\"../assets/Images/6degreesWeb/news/views.svg\" alt=\"\">{{item.pageview}}\n                                            </span>\n                                        </div>\n                                        <div class=\"main-news-tag_gray_mobile\">\n                                            <span>\n                                                <img src=\"../assets/Images/6degreesWeb/news/tag-icon.svg\" alt=\"\">\n                                                <span>\n\n                                                </span>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n\n                    <!-- 一般新聞區--------------------------------------------------- -->\n\n\n                    <div class=\"news container\" v-for=\"item in filterData\" :key=\"item.id\">\n                        <div class=\"row\">\n                            <div class=\"col-md-4 \">\n                                <router-link :to=\"'/inspect/'+item.id\" class=\"news-img\" :style=\"{ backgroundImage: 'url(' + item.media.small + ')' }\"></router-link>\n                                <!-- <a :href=\"item.news_url\" class=\"news-img\" :style=\"{ backgroundImage: 'url(' + item.media.small + ')' }\">\n                                </a> -->\n                            </div>\n                            <div class=\"col-md-8\">\n                                <h3>{{item.title}}</h3>\n                                <p class=\"d-block d-sm-none\">{{item.description}}</p>\n                                <div class=\"news-tag\">\n                                    <span>{{item.datasource_name}}</span>\n                                    <span><img src=\"../assets/Images/6degreesWeb/news/time.svg\" alt=\"\">{{\n                                        item.report_time | moment(\"h:mm\") }}\n                                    </span>\n                                    <span><img src=\"../assets/Images/6degreesWeb/news/views.svg\" alt=\"\">{{item.pageview}}</span>\n                                </div>\n                                <div class=\"news-tag_gray\" v-if='item.tag'>\n                                    <span>\n                                        <img src=\"../assets/Images/6degreesWeb/news/tag-icon.svg\" alt=\"\">\n                                        <span v-for=\"tag in item.tag\" :key=\"tag.id\">\n                                            {{ tag.name }}\n                                        </span>\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- 載入條------------------------------------- -->\n\n                    <div id='loadingBar' class=\"refresh-bar\">\n                        <a href=\"#\" @click.prevent='getData(1,dataLimit)'>\n                            <img class=\"d-none d-md-block\" src=\"../assets/Images/6degreesWeb/other/loading-md.svg\" alt=\"\"\n                                style=\"width:100%;height: 48px;\">\n                            <img class=\"d-block d-md-none\" src=\"../assets/Images/6degreesWeb/other/loading-sm.svg\" alt=\"\"\n                                style=\"width:100%;height: 48px;\">\n                            <span>加載更多</span>\n                        </a>\n\n                    </div>\n\n                </div>\n\n                <!-- 測欄---------------------------------------------------- -->\n\n                <sidebar></sidebar>\n\n            </div>\n        </div>\n        <div style=\"margin-bottom: 500px;\"></div>\n    </div>\n</template>\n\n<script>\n    import sidebar from \"./sidebar.vue\"\n    import $ from \"jquery\";\n    export default {\n        name: 'newsList',\n        components: {\n            sidebar\n        },\n        props: {\n            msg: String\n        },\n        data() {\n            return {\n                domain: 'http://api.dev.sixdegreeworld.com',\n                Token: '',\n                Token_type: '',\n                data: [{\n                    media: []\n                }],\n                recommendData: [],\n                navbarData: [],\n                popularData: [],\n                searchWorld: \"\",\n                mainNews: 0,\n                scrollTop: '',\n                windowsWidth: '',\n                offsetHeight: '',\n                limitScrollTop: 1600,\n                dataLimit: 8,\n                isLoading: false,\n            }\n        },\n        computed: {\n            filterData: function () {\n                let nowData = this.data.map(function (el) {\n                    if (el.media == [] || el.media == null) {\n                        el.media = {\n                            small: \"https://newweb.dev.sixdegreeworld.com/sixdegree.svg\"\n                        }\n                        return el;\n                    } else {\n                        return el;\n                    }\n                })\n                return nowData;\n            },\n            filterPopularData: function () {\n                let nowData = this.popularData.map(function (el) {\n                    return el.name\n                })\n                return nowData;\n            }\n        },\n        watch: {\n            scrollTop: function () {\n                const vm = this;\n                if ((vm.offsetHeight - vm.scrollTop) < 175) {\n                    if (vm.windowsWidth < 996) {\n                        return\n                    }\n                    vm.offsetHeight += 1480,\n                        vm.getData(1, this.dataLimit)\n                } else {\n                    return\n                }\n            }\n        },\n        methods: {\n            searchSubmit() {\n                this.$router.push(`/search/${this.searchWorld}`)\n            },\n            onScroll() {\n                // 滾動判断条件\n                this.scrollTop = (document.documentElement.scrollTop || document.body.scrollTop ||\n                    window.pageYOffset) + $(window).height();\n\n                this.windowsWidth = $(window).width()\n\n                // this.offsetHeight = document.body.scrollHeight;\n            },\n            init() {\n                const vm = this;\n                vm.limitScrollTop = 1600;\n                vm.offsetHeight = document.body.scrollHeight;\n                vm.dataLimit = 8;\n                vm.isLoading = true;\n                $.ajax({\n\n                    //get token\n\n                    type: \"Post\",\n                    url: this.domain + '/oauth/token/',\n                    data: {\n                        grant_type: \"client_credentials\",\n                        client_id: \"1\",\n                        client_secret: \"zSVE2Bd64icnRyo7VSo997rriPLDPMbY9LmmIurv\"\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            vm.Token = data.data.access_token;\n                            vm.Token_type = data.data.token_type;\n                            //有資料的動作\n                            vm.getData();\n                            vm.getNavbar();\n                            vm.getPopular();\n                            //取得文章資料\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            getData(page = 1, limit = 10) {\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n                    type: \"Get\",\n                    url: this.domain + `/article?page=${page}&limit=${limit}`,\n                    headers: {\n                        \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            //有資料的動作\n                            vm.data = data.data;\n                            vm.dataLimit += 10;\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            getRecommendData(page = 1, limit = 10) {\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n                    type: \"Get\",\n                    url: this.domain + `/article/recommend`,\n                    headers: {\n                        \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            //有資料的動作\n                            vm.data = data.data;\n                            vm.offsetHeight = document.body.scrollHeight;\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            getNavbar() {\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n                    type: \"Get\",\n                    url: this.domain + `/navbar/`,\n                    headers: {\n                        \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            //有資料的動作\n                            vm.navbarData = data.data;\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            getPopular() {\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n                    type: \"Get\",\n                    url: vm.domain + `/search/popular`,\n                    headers: {\n                        \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            //有資料的動作\n                            vm.popularData = data.data;\n                            vm.isLoading = false;\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n        },\n        mounted: function () {\n            this.$nextTick(function () {\n                window.addEventListener('scroll', this.onScroll)\n            })\n\n            this.offsetHeight = document.body.scrollHeight;\n        },\n        created() {\n            this.init();\n        },\n    }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\">\n\n</style>"]}]}