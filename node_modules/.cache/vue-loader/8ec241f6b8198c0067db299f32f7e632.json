{"remainingRequest":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chih-linliu/Desktop/sixdegrees_web-master/src/components/sidebar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/src/components/sidebar.vue","mtime":1541528682000},{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/cache-loader/dist/cjs.js","mtime":1541592870520},{"path":"/Users/chih-linliu/Desktop/sixdegrees_web-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport $ from \"jquery\";\nexport default {\n    name: 'newsList',\n    components: {\n\n    },\n    props: {\n        msg: String\n    },\n    data() {\n        return {\n            domain: 'http://api.dev.sixdegreeworld.com',\n            Token: '',\n            Token_type: '',\n            data: [{\n                media: []\n            }],\n            popularActive:'1',\n            isLoading: false,\n        }\n    },\n    computed: {\n        filterData: function () {\n            let nowData = this.data.map(function (el) {\n                if (el.media == [] || el.media == null) {\n                    el.media = {\n                        small: \"https://newweb.dev.sixdegreeworld.com/sixdegree.svg\"\n                    }\n                    return el;\n                } else {\n                    return el;\n                }\n            })\n            return nowData;\n        }\n    },\n    watch: {\n            // if (this.scrollTop > this.LimitScrollTop) {\n            //     this.LimitScrollTop += 1200;\n            //     this.dataLimit += 10;\n            //     vm.getData(1, this.dataLimit)\n            // } else {\n            //     return\n            // }\n        //}\n    },\n    methods: {\n        onScroll() {\n            // 滾動判断条件\n            this.scrollTop = (document.documentElement.scrollTop || document.body.scrollTop ||\n                window.pageYOffset) + $(window).height();\n\n            this.windowsWidth = $(window).width()\n\n            // this.offsetHeight = document.body.scrollHeight;\n        },\n        init() {\n            const vm = this;\n            vm.isLoading = true;\n            $.ajax({\n\n                //get token\n\n                type: \"Post\",\n                url: this.domain + '/oauth/token/',\n                data: {\n                    grant_type: \"client_credentials\",\n                    client_id: \"1\",\n                    client_secret: \"zSVE2Bd64icnRyo7VSo997rriPLDPMbY9LmmIurv\"\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        vm.Token = data.data.access_token;\n                        vm.Token_type = data.data.token_type;\n                        //有資料的動作\n                        vm.getPopularData()\n                        //取得文章資料\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        },\n        getPopularData(page = 1, limit = 10 ,timetype = '24h') {\n            const vm = this;\n            vm.isLoading = true;\n            console.log(timetype)\n            $.ajax({\n                type: \"Get\",\n                url: this.domain + `/article/popular?page=${page}&limit=${limit}&timetype=${timetype}`,\n                headers: {\n                    \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                },\n                success: function (data) {\n                    vm.isLoading = false;\n                    if (data == \"\") {\n                        //沒資料的動作\n                    } else {\n                        //有資料的動作\n                        vm.data = data.data;\n                        console.log('成功得到資料')\n                    }\n                },\n                failure: function (errMsg) {\n                    console.log(errMsg);\n                    //發生錯誤的動作\n                }\n            })\n        }\n    },\n    mounted: function () {\n        this.$nextTick(function () {\n            window.addEventListener('scroll', this.onScroll)\n        })\n\n        this.offsetHeight = document.body.scrollHeight;\n    },\n    created() {\n        this.init();\n    },\n}\n",{"version":3,"sources":["sidebar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"sidebar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"col-lg-4\">\n        <!-- 熱門新聞---------------------------------------------------------------------------->\n\n        <div class=\"hot-news\">\n            <div class=\"hot-news-card\">\n                <h2>熱門新聞</h2>\n                <div class=\"hot-news-button-groups mt-3\">\n                    <a href=\"#\" style=\"background-color: #2C4D8A;\" @click=\"popularActive=1,getPopularData(page = 1, limit = 10 ,timetype = '24h')\" :class=\"{'active':popularActive==1}\">24小時</a>\n                    <a href=\"#\" style=\"background-color: #3565BB;\" @click=\"popularActive=2,getPopularData(page = 1, limit = 10 ,timetype = '3d')\" :class=\"{'active':popularActive==2}\">三日</a>\n                    <a href=\"#\" style=\"background-color: #3565BB;\" @click=\"popularActive=3,getPopularData(page = 1, limit = 10 ,timetype = '1w')\" :class=\"{'active':popularActive==3}\">一周</a>\n                </div>\n                <div class=\"hot-news-scroll container\">\n                    <div class=\"row\">\n                        <div v-for='(item,index) in data' class=\"col-12 col-sm-5 col-lg-12 mx-auto mx-lg-0\">\n                            <div class=\"hot-news-item \">\n                                <span class=\"hot-news-item_index\">\n                                    {{index+1}}\n                                </span>\n                                <h3>{{item.title}}</h3>\n                                <div class=\"news-tag mt-2\">\n                                    <span>{{item.datasource_name}}</span>\n                                    <span><img src=\"../assets/Images/6degreesWeb/news/time.svg\" alt=\"\">\n                                        {{ item.report_time | moment(\"h:mm\") }}\n                                    </span>\n                                    <span>\n                                        <img src=\"../assets/Images/6degreesWeb/news/views.svg\" alt=\"\">1125\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <!-- 熱門評論------------------------------------------------------------------------------------- -->\n\n        <div class=\"hot-news mt-5\">\n            <div class=\"hot-news-card\">\n                <h2>熱門評論</h2>\n                <div class=\"hot-news-scroll container\">\n                    <div class=\"row\">\n                        <div v-for='(item,index) in data' class=\"col-12 col-sm-5 col-lg-12 mx-auto mx-lg-0\">\n                            <a class=\"user-photo\" href=\"#\">\n                                <div><img style=\"width:36px; border-radius:50%;\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS0_2nqm0H20gpO-Pf9BsBwuAYt3McWcb-6rFs37i244h71Lyrnkg\"\n                                        alt=\"\">\n                                </div>\n                            </a>\n                            <div class=\"hot-news-item \">\n                                <h4>{{item.title}}</h4>\n                                <div class=\"news-tag mt-2\">\n                                    <span>{{item.datasource_name}}</span>\n                                    <span><i class=\"fas fa-thumbs-up\"></i>\n                                        31\n                                    </span>\n                                    <span>\n                                        <img src=\"../assets/Images/6degreesWeb/news/views.svg\" alt=\"\">1125\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <!-- footer---------------------------------------------------------------------------- -->\n\n        <div class=\"container\">\n            <footer class=\"row footer\">\n                <div class=\"col-6 mt-3\"><a href=\"#\"><img src=\"../assets/Images/6degreesWeb/phone/andro.svg\" alt=\"\"></a></div>\n                <div class=\"col-6 mt-3\"><a href=\"#\"><img src=\"../assets/Images/6degreesWeb/phone/ios.svg\" alt=\"\"></a></div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">關於我們</a> </div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">連繫我們</a></div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">加入我們</a></div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">服務條款</a></div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">版權聲明</a></div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">友情連結</a></div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">RSS訂閱</a></div>\n                <div class=\"col-4 mt-4\"><a href=\"#\">隱私策略</a></div>\n            </footer>\n        </div>\n    </div>\n</template>\n\n<script>\n    import $ from \"jquery\";\n    export default {\n        name: 'newsList',\n        components: {\n\n        },\n        props: {\n            msg: String\n        },\n        data() {\n            return {\n                domain: 'http://api.dev.sixdegreeworld.com',\n                Token: '',\n                Token_type: '',\n                data: [{\n                    media: []\n                }],\n                popularActive:'1',\n                isLoading: false,\n            }\n        },\n        computed: {\n            filterData: function () {\n                let nowData = this.data.map(function (el) {\n                    if (el.media == [] || el.media == null) {\n                        el.media = {\n                            small: \"https://newweb.dev.sixdegreeworld.com/sixdegree.svg\"\n                        }\n                        return el;\n                    } else {\n                        return el;\n                    }\n                })\n                return nowData;\n            }\n        },\n        watch: {\n                // if (this.scrollTop > this.LimitScrollTop) {\n                //     this.LimitScrollTop += 1200;\n                //     this.dataLimit += 10;\n                //     vm.getData(1, this.dataLimit)\n                // } else {\n                //     return\n                // }\n            //}\n        },\n        methods: {\n            onScroll() {\n                // 滾動判断条件\n                this.scrollTop = (document.documentElement.scrollTop || document.body.scrollTop ||\n                    window.pageYOffset) + $(window).height();\n\n                this.windowsWidth = $(window).width()\n\n                // this.offsetHeight = document.body.scrollHeight;\n            },\n            init() {\n                const vm = this;\n                vm.isLoading = true;\n                $.ajax({\n\n                    //get token\n\n                    type: \"Post\",\n                    url: this.domain + '/oauth/token/',\n                    data: {\n                        grant_type: \"client_credentials\",\n                        client_id: \"1\",\n                        client_secret: \"zSVE2Bd64icnRyo7VSo997rriPLDPMbY9LmmIurv\"\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            vm.Token = data.data.access_token;\n                            vm.Token_type = data.data.token_type;\n                            //有資料的動作\n                            vm.getPopularData()\n                            //取得文章資料\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            },\n            getPopularData(page = 1, limit = 10 ,timetype = '24h') {\n                const vm = this;\n                vm.isLoading = true;\n                console.log(timetype)\n                $.ajax({\n                    type: \"Get\",\n                    url: this.domain + `/article/popular?page=${page}&limit=${limit}&timetype=${timetype}`,\n                    headers: {\n                        \"Authorization\": vm.Token_type + \" \" + vm.Token,\n                        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n                    },\n                    success: function (data) {\n                        vm.isLoading = false;\n                        if (data == \"\") {\n                            //沒資料的動作\n                        } else {\n                            //有資料的動作\n                            vm.data = data.data;\n                            console.log('成功得到資料')\n                        }\n                    },\n                    failure: function (errMsg) {\n                        console.log(errMsg);\n                        //發生錯誤的動作\n                    }\n                })\n            }\n        },\n        mounted: function () {\n            this.$nextTick(function () {\n                window.addEventListener('scroll', this.onScroll)\n            })\n\n            this.offsetHeight = document.body.scrollHeight;\n        },\n        created() {\n            this.init();\n        },\n    }\n</script>\n\n<style lang=\"scss\">\n\n</style>"]}]}